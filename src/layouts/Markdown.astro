---
import Html from "./Html.astro"
import Header from "../components/Header.astro"
import Wrapper from "../components/Wrapper.astro"
import type { CollectionEntry } from "astro:content"
import PageHeader from "../components/PageHeader.astro"
import { format, formatISO } from "date-fns"
import Footer from "../components/Footer.astro"
import FlexSpacer from "../components/FlexSpacer.astro"
import { defaultOpenGraph } from "../meta"

export interface Props {
  entry: CollectionEntry<"blog">
}

const { entry } = Astro.props
const og = defaultOpenGraph
og.title = entry.data.title
og.type = "article"
---

<Html meta={{ title: entry.data.title, og }}>
  <Header />
  <main>
    <Wrapper element="article">
      <PageHeader title={entry.data.title}>
        {
          entry.data.subtitle && (
            <div class="subtitle">{entry.data.subtitle}</div>
          )
        }
        <time datetime={formatISO(entry.data.date)}
          >{format(entry.data.date, "MMM dd yyyy")}</time
        >
      </PageHeader>
      <slot />
    </Wrapper>
  </main>
  <FlexSpacer />
  <Footer />
</Html>

<style is:global lang="scss">
  .subtitle {
    font-style: italic;
  }

  article {
    .astro-code {
      grid-column: wide;
      margin: 0 -1rem;
      border-top: 1px solid;
      border-bottom: 1px solid;
      border-color: var(--neutral-10);
      padding: 1rem;
      font-size: 0.9em;

      &::-webkit-scrollbar {
        background-color: transparent;
        height: 8px;
      }

      &::-webkit-scrollbar-thumb {
        opacity: 0.1;
        background-color: #ffffff;
        height: 8px;
      }

      &::-webkit-scrollbar-track {
        padding: 1px;
      }
    }

    code:not(.astro-code > *) {
      background-color: var(--neutral-10);
      padding: 0 0.2em;
      font-size: 0.9em;
    }

    ul,
    ol {
      margin: 0;
    }

    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    & > p {
      max-width: 52ch;
    }

    time {
      color: var(--neutral-60);
    }

    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0.5rem 0 -0.25rem 0;
      font-weight: 400;
    }

    h2 {
      font-size: 1.5em;
    }

    h3 {
      font-size: 1.2em;
    }

    h4,
    h5,
    h6 {
      font-size: 1em;
    }

    .footnotes {
      display: flex;
      flex-direction: column;
      gap: 1.25rem 0;
      color: var(--neutral-60);
    }

    .data-footnote-backref {
      font-family: var(--font-mono);
    }

    hr {
      border-top: none;
      border-bottom: 1px solid var(--neutral-60);
      width: 20%;
    }

    blockquote {
      margin: 0;
      border-left: 1px solid var(--neutral-60);
      padding: 0 0 0 2rem;
    }
  }
</style>
